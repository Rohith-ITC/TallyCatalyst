"use strict";(self.webpackChunkDataLynkr=self.webpackChunkDataLynkr||[]).push([[287],{6096(){},60287(e,t,n){n.r(t),n.d(t,{default:()=>d});var s=n(89379),o=n(9950),r=n(1049);const a=JSON.parse('{"ipAddress":"","portNumber":""}');var i=n(16243),l=(n(6096),n(44414));const d=function(e){let{onLogout:t,onShowTallyConfig:n}=e;const[d,c]=(0,o.useState)(!1),[p,x]=(0,o.useState)(""),[g,f]=(0,o.useState)(""),[b,m]=(0,o.useState)(a),[h,u]=(0,o.useState)({}),[y,j]=(0,o.useState)(!1),[S,N]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!0),[w,z]=(0,o.useState)(window.innerWidth<=900);(0,o.useEffect)(()=>{const e=()=>z(window.innerWidth<=900);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const v=C?220:60;(0,o.useEffect)(()=>{const e=localStorage.getItem("tallyConfig");m(e?JSON.parse(e):a)},[]),(0,o.useEffect)(()=>{x(b.ipAddress||""),f(b.portNumber||"")},[b]);const A=(e,t)=>{"ipAddress"===e?x(t):"portNumber"===e&&f(t),h[e]&&u(t=>(0,s.A)((0,s.A)({},t),{},{[e]:""}))};return(0,l.jsxs)("div",{className:"adminhome-container",style:{minHeight:"100vh",display:"flex",background:"linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%)"},children:[(0,l.jsx)("style",{children:"\n        .sidebar-animated {\n          width: ".concat(v,"px;\n          min-width: ").concat(v,"px;\n          max-width: ").concat(v,"px;\n          transition: width 0.3s, min-width 0.3s, max-width 0.3s;\n          overflow-x: hidden;\n          z-index: 100;\n        }\n        .sidebar-toggle-btn {\n          position: absolute;\n          top: 18px;\n          right: -20px;\n          z-index: 2000;\n          background: #fff;\n          border: 1px solid #cbd5e1;\n          border-radius: 50%;\n          width: 36px;\n          height: 36px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 2px 8px 0 rgba(31,38,135,0.08);\n          cursor: pointer;\n          transition: right 0.3s;\n        }\n        .sidebar-logo {\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: ").concat("center",";\n          margin-bottom: 40px;\n          transition: all 0.3s;\n        }\n        .sidebar-logo img {\n          width: ").concat(C?120:40,"px;\n          height: ").concat(C?120:40,"px;\n          object-fit: contain;\n          margin: 0 auto;\n          transition: width 0.3s, height 0.3s;\n        }\n        .sidebar-menu-label {\n          display: ").concat(C?"block":"none",";\n          font-size: 13px;\n          color: #cbd5e1;\n          margin: 0 0 12px 24px;\n          letter-spacing: 1px;\n        }\n        .sidebar-link-label {\n          display: ").concat(C?"inline":"none",";\n          transition: display 0.3s;\n        }\n      ")}),(0,l.jsxs)("aside",{className:"adminhome-sidebar sidebar-animated",children:[(0,l.jsx)("div",{className:"sidebar-logo",children:(0,l.jsx)("img",{src:r,alt:"Tally Logo"})}),(0,l.jsx)("div",{className:"sidebar-menu-label",children:"MENU"}),(0,l.jsxs)("nav",{style:{display:"flex",flexDirection:"column",gap:18,fontSize:17},children:[(0,l.jsxs)("a",{href:"#",onClick:()=>c(!1),style:{color:d?"#fff":"#ff9800",background:d?"transparent":"rgba(255,152,0,0.08)",textDecoration:"none",padding:"10px 18px",display:"flex",alignItems:"center",gap:12,borderRadius:"8px",fontWeight:d?500:700,margin:"0 8px",transition:"all 0.2s ease",border:d?"1px solid transparent":"1px solid rgba(255, 255, 255, 0.2)",cursor:"pointer",justifyContent:C?"flex-start":"center"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:22},children:"dashboard"}),(0,l.jsx)("span",{className:"sidebar-link-label",children:"Dashboard"})]}),(0,l.jsxs)("a",{href:"#",onClick:()=>c(!0),style:{color:d?"#ff9800":"#fff",background:d?"rgba(255,152,0,0.08)":"transparent",textDecoration:"none",padding:"10px 18px",display:"flex",alignItems:"center",gap:12,borderRadius:"8px",fontWeight:d?700:500,margin:"0 8px",transition:"all 0.2s ease",border:d?"1px solid rgba(255, 255, 255, 0.2)":"1px solid transparent",cursor:"pointer",justifyContent:C?"flex-start":"center"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:22},children:"settings"}),(0,l.jsx)("span",{className:"sidebar-link-label",children:"Tally Configuration"})]})]}),(0,l.jsx)("button",{className:"sidebar-toggle-btn",style:{right:-20},onClick:()=>k(!C),"aria-label":C?"Collapse sidebar":"Expand sidebar",children:(0,l.jsx)("span",{className:"material-icons",style:{fontSize:22,color:"#1e40af"},children:C?"chevron_left":"chevron_right"})})]}),(0,l.jsx)("main",{className:"adminhome-main",style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20,minWidth:0,marginLeft:0,transition:"margin 0.3s"},children:d?(0,l.jsxs)("div",{className:"tally-config-card",children:[S&&(0,l.jsxs)("div",{style:{position:"absolute",top:"-60px",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"#fff",padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",zIndex:10,display:"flex",alignItems:"center",gap:"8px"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"18px"},children:"check_circle"}),"Configuration saved successfully!"]}),(0,l.jsx)("button",{onClick:()=>{c(!1),n&&n(!1),u({}),N(!1)},style:{position:"absolute",top:20,right:20,background:"rgba(100, 116, 139, 0.1)",border:"none",borderRadius:"50%",width:"40px",height:"40px",fontSize:"20px",color:"#64748b",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(100, 116, 139, 0.2)",e.target.style.color="#475569"},onMouseLeave:e=>{e.target.style.background="rgba(100, 116, 139, 0.1)",e.target.style.color="#64748b"},children:"\xd7"}),(0,l.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,l.jsx)("div",{style:{width:"60px",height:"60px",background:"linear-gradient(135deg, #3b82f6, #1e40af)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 24px rgba(59, 130, 246, 0.3)"},children:(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"28px",color:"#fff"},children:"settings"})}),(0,l.jsx)("h2",{style:{color:"#1e293b",fontWeight:"700",marginBottom:"8px",fontSize:"28px"},children:"Tally Configuration"}),(0,l.jsx)("p",{style:{color:"#64748b",fontSize:"14px",margin:"0",lineHeight:"1.5"},children:"Configure your Tally server connection settings"})]}),(0,l.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,l.jsxs)("label",{style:{display:"block",marginBottom:"8px",color:"#334155",fontWeight:"600",textAlign:"left",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"18px",color:"#3b82f6"},children:"router"}),"IP Address or Hostname"]}),(0,l.jsx)("input",{type:"text",value:p,onChange:e=>A("ipAddress",e.target.value),placeholder:"localhost, 192.168.1.100, or example.com",style:{width:"100%",padding:"16px 20px",borderRadius:"12px",border:h.ipAddress?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"15px",outline:"none",transition:"all 0.2s ease",backgroundColor:"#f8fafc",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor=h.ipAddress?"#ef4444":"#3b82f6",e.target.style.backgroundColor="#fff",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor=h.ipAddress?"#ef4444":"#e2e8f0",e.target.style.backgroundColor="#f8fafc",e.target.style.boxShadow="none"}}),h.ipAddress&&(0,l.jsxs)("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"6px",textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"14px"},children:"error"}),h.ipAddress]})]}),(0,l.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,l.jsxs)("label",{style:{display:"block",marginBottom:"8px",color:"#334155",fontWeight:"600",textAlign:"left",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"18px",color:"#3b82f6"},children:"settings_ethernet"}),"Port Number"]}),(0,l.jsx)("input",{type:"text",value:g,onChange:e=>A("portNumber",e.target.value),placeholder:"9000",style:{width:"100%",padding:"16px 20px",borderRadius:"12px",border:h.portNumber?"2px solid #ef4444":"2px solid #e2e8f0",fontSize:"15px",outline:"none",transition:"all 0.2s ease",backgroundColor:"#f8fafc",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor=h.portNumber?"#ef4444":"#3b82f6",e.target.style.backgroundColor="#fff",e.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:e=>{e.target.style.borderColor=h.portNumber?"#ef4444":"#e2e8f0",e.target.style.backgroundColor="#f8fafc",e.target.style.boxShadow="none"}}),h.portNumber&&(0,l.jsxs)("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"6px",textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"14px"},children:"error"}),h.portNumber]})]}),(0,l.jsxs)("div",{className:"tally-config-btn-group",children:[(0,l.jsxs)("button",{onClick:()=>{x(""),f(""),u({})},disabled:y,style:{padding:"14px 28px",background:"#f1f5f9",color:"#475569",border:"2px solid #e2e8f0",borderRadius:"12px",cursor:y?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",opacity:y?.6:1},onMouseEnter:e=>{y||(e.target.style.background="#e2e8f0",e.target.style.borderColor="#cbd5e1")},onMouseLeave:e=>{y||(e.target.style.background="#f1f5f9",e.target.style.borderColor="#e2e8f0")},children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"16px"},children:"clear"}),"Clear"]}),(0,l.jsx)("button",{onClick:async()=>{if((()=>{const e={};if(p.trim()){const t=p.trim();"localhost"===t||/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)||(e.ipAddress="Please enter a valid IP address, localhost, or domain name")}else e.ipAddress="IP Address or Hostname is required";return g.trim()?/^\d+$/.test(g)?(parseInt(g)<1||parseInt(g)>65535)&&(e.portNumber="Port must be between 1 and 65535"):e.portNumber="Port must be a number":e.portNumber="Port Number is required",u(e),0===Object.keys(e).length})()){j(!0);try{const e={ip:p.trim(),port:g.trim()},t=(0,i.getApiUrl)(i.API_CONFIG.ENDPOINTS.TALLY_CHECK_CONNECTION);console.log("\ud83d\udd0d API Debug Info:"),console.log("URL:",t),console.log("Payload:",e),console.log("Config:",i.API_CONFIG);const s=t,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("\ud83d\udce1 Response Status:",o.status),console.log("\ud83d\udce1 Response Headers:",o.headers),!o.ok)throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));const r=await o.json();if(console.log("\ud83d\udce1 Response Data:",r),"success"===r.status||r.success){const e={ipAddress:p.trim(),portNumber:g.trim()};m(e),localStorage.setItem("tallyConfig",JSON.stringify(e)),N(!0),setTimeout(()=>{N(!1),c(!1),n&&n(!1)},3e3)}else{const e=r.message||"Unable to connect to Tally server";console.error("\u274c API Error Response:",r),alert("Connection failed: "+e)}}catch(e){console.error("\u274c API Error:",e),console.error("\u274c Error Details:",{message:e.message,stack:e.stack,config:i.API_CONFIG}),alert("Connection failed: Unable to reach the server. Please check if the backend is running on "+i.API_CONFIG.BASE_URL)}finally{j(!1)}}},disabled:y,style:{padding:"14px 28px",background:y?"#94a3b8":"#3b82f6",color:"#fff",border:"none",borderRadius:"12px",cursor:y?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:y?"none":"0 4px 12px rgba(59, 130, 246, 0.3)"},onMouseEnter:e=>{y||(e.target.style.background="#2563eb",e.target.style.boxShadow="0 6px 16px rgba(59, 130, 246, 0.4)")},onMouseLeave:e=>{y||(e.target.style.background="#3b82f6",e.target.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)")},children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"16px",animation:"spin 1s linear infinite"},children:"refresh"}),"Saving..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"16px"},children:"save"}),"Save Configuration"]})})]})]}):(0,l.jsxs)("div",{style:{textAlign:"center",color:"#64748b"},children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",margin:"0 auto 24px"},children:(0,l.jsx)("div",{className:"tally-logo",style:{background:"linear-gradient(135deg, #f1f5f9, #e2e8f0)",borderRadius:"50%",border:"2px dashed #cbd5e1"},children:(0,l.jsx)("span",{className:"material-icons",style:{fontSize:"48px",color:"#94a3b8"},children:"dashboard"})})}),(0,l.jsxs)("h3",{style:{color:"#334155",fontWeight:"600",marginBottom:"8px",fontSize:"20px"},children:["Welcome, ",sessionStorage.getItem("name")||"Admin","!"]}),(0,l.jsx)("p",{style:{color:"#64748b",fontSize:"14px",margin:"0",lineHeight:"1.5"},children:"This is your admin dashboard. More features coming soon..."})]})})]})}}}]);